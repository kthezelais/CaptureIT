<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaptureIT : Connexion</title>
</head>

<body>

    <section>

        <article>

            <form id="form-login" action="" method="post">

                <input type="text" name="login" id="login" placeholder="Pseudo"><br>

                <input type="password" name="password" id="password" placeholder="Mot de passe"><br>

                <input type="url" name="server" id="server" placeholder="Adresse de votre serveur"><br>

                <input type="submit" value="Connexion"><br>

            </form>

        </article>

        <article>
            <p id="result"></p>
        </article>

    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $("#form-login").on('submit', function(event) {
            var login = $('#login').val();
            var password = $('#password').val();
            var url = $('#server').val() + "/CaptureIT/backend/login.php";

            auth = btoa(login + ':' + password);

            event.preventDefault();

            var data = '{' +
                '"content" : "' + auth + '"' +
                '}';

            alert(data);

            var result = $.ajax({
                async: false,
                url: url,
                type: "POST",
                dataType: "json",
                data: data,

                success: function(resultat, statut, erreur) {
                    console.log("RESULTAT : \n" + JSON.stringify(resultat) + "\n\nSTATUT : " + statut + "\n\nERREUR : " + JSON.stringify(erreur));
                },

                error: function(resultat, statut, erreur) {
                    console.log("RESULTAT : \n" + JSON.stringify(resultat) + "\n\nSTATUT : " + statut + "\n\nERREUR : " + JSON.stringify(erreur));
                }

            });

            $("#result").text(JSON.stringify(result.responseText));
        });
    </script>

</body>

</html>